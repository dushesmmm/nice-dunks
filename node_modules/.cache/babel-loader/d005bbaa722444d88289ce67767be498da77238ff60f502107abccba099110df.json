{"ast":null,"code":"import React,{useState,useEffect}from'react';import classes from'./ProductsPage.module.css';import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductsPage=()=>{const[originalProducts,setOriginalProducts]=useState([]);const[products,setProducts]=useState([]);const[loading,setLoading]=useState(false);const[page,setPage]=useState(1);const[loadedProductIds,setLoadedProductIds]=useState(new Set());const[sortOrder,setSortOrder]=useState('desc');const[sortBy,setSortBy]=useState('createdAt');const[showSizeOptions,setShowSizeOptions]=useState(false);const[showBrandOptions,setShowBrandOptions]=useState(false);const[showCategoryOptions,setShowCategoryOptions]=useState(false);const[apiBrands,setApiBrands]=useState([]);const[availableSizes,setAvailableSizes]=useState([]);const[selectedSizeOptions,setSelectedSizeOptions]=useState([]);const[allBrands,setAllBrands]=useState([]);const[selectedBrandOptions,setSelectedBrandOptions]=useState([]);const[selectedCategoryOptions,setSelectedCategoryOptions]=useState([]);const navigate=useNavigate();const location=useLocation();const searchParams=new URLSearchParams(location.search);const selectedBrand=searchParams.get('brand');const fetchProducts=async()=>{try{setLoading(true);const response=await fetch(\"https://nicedunks.ru/api/sneakers?\");const data=await response.json();const newProducts=data.filter(product=>!loadedProductIds.has(product.vendorCode));newProducts.reverse();setOriginalProducts(prevOriginalProducts=>[...prevOriginalProducts,...newProducts]);setProducts(prevProducts=>[...prevProducts,...newProducts]);setLoadedProductIds(prevIds=>new Set([...prevIds,...newProducts.map(product=>product.vendorCode)]));setPage(prevPage=>prevPage+1);}catch(error){console.error('Ошибка при загрузке товаров',error);}finally{setLoading(false);}};const getQueryParam=name=>{const params=new URLSearchParams(location.search);return params.get(name);};useEffect(()=>{// При первоначальной загрузке компонента, применяем параметры из URL\nconst sizesParam=getQueryParam('sizes');const brandsParam=getQueryParam('brands');const categoryParam=getQueryParam('category');const sortByParam=getQueryParam('sortBy');const sortOrderParam=getQueryParam('sortOrder');if(sizesParam){setSelectedSizeOptions(sizesParam.split(','));}if(brandsParam){const brandOptions=brandsParam.split(',').map(brand=>({brand:brand.trim()}));setSelectedBrandOptions(brandOptions);}if(categoryParam){setSelectedCategoryOptions(categoryParam.split(','));}if(sortByParam){setSortBy(sortByParam);}if(sortOrderParam){setSortOrder(sortOrderParam);}},[]);const updateUrl=()=>{const searchParams=new URLSearchParams();if(selectedSizeOptions.length>0){searchParams.append('sizes',selectedSizeOptions.join(','));}if(selectedBrandOptions.length>0){searchParams.append('brands',selectedBrandOptions.map(option=>option.brand).join(','));}if(selectedCategoryOptions.length>0){searchParams.append('category',selectedCategoryOptions.join(','));}searchParams.append('sortBy',sortBy);searchParams.append('sortOrder',sortOrder);navigate(\"?\".concat(searchParams.toString()));};useEffect(()=>{updateUrl();},[selectedSizeOptions,selectedBrandOptions,selectedCategoryOptions,sortOrder,sortBy]);useEffect(()=>{if(selectedBrand){handleBrandOptionClick(selectedBrand);}},[selectedBrand]);const fetchBrands=async()=>{try{const response=await fetch('https://nicedunks.ru/api/brands');const data=await response.json();setApiBrands(data);}catch(error){console.error('Ошибка при загрузке брендов:',error);}};useEffect(()=>{fetchBrands();},[]);useEffect(()=>{fetchProducts();},[]);const handleScroll=()=>{const scrollThreshold=100;const isCloseToBottom=window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-scrollThreshold;if(isCloseToBottom&&!loading){fetchProducts();}};useEffect(()=>{window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[loading]);const redirectToProductPage=vendorCode=>{const link=\"/product/\".concat(vendorCode.toLowerCase());navigate(link);};const formatBrand=brand=>{const words=brand.split(/\\s*,\\s*/);if(words.length>1){return words.join(' X ');}return brand;};const handleSortClick=sortType=>{if(sortType===sortBy){setSortOrder(sortOrder==='asc'?'desc':'asc');}else{setSortBy(sortType);setSortOrder('asc');}};const handleSizeOptionClick=async size=>{try{const response=await fetch(\"https://nicedunks.ru/api/sneakers?sizes=\".concat(size));const newData=await response.json();console.log('Полученные данные:',newData);if(selectedSizeOptions.includes(size)){setSelectedSizeOptions(prevOptions=>prevOptions.filter(prevSize=>prevSize!==size));}else{const uniqueNewData=newData.filter(newItem=>{return!originalProducts.some(existingItem=>{return newItem.id===existingItem.id;});});setOriginalProducts(prevOriginalProducts=>[...prevOriginalProducts,...uniqueNewData]);setSelectedSizeOptions(prevOptions=>[...prevOptions,size]);}}catch(error){console.error('Ошибка при получении данных:',error);}};const handleBrandOptionClick=async brand=>{try{const response=await fetch(\"https://nicedunks.ru/api/sneakers?brands=\".concat(brand));const data=await response.json();console.log('Полученные данные:',data);const selectedBrands=brand.split(',').map(item=>item.trim());const isBrandSelected=selectedBrandOptions.some(option=>{const optionBrands=option.brand.split(',').map(item=>item.trim());return optionBrands.some(brand=>selectedBrands.includes(brand));});if(isBrandSelected){setSelectedBrandOptions(prevOptions=>prevOptions.filter(option=>{const optionBrands=option.brand.split(',').map(item=>item.trim());return!optionBrands.some(brand=>selectedBrands.includes(brand));}));setProducts(prevProducts=>prevProducts.filter(product=>!data.some(newItem=>newItem.id===product.id)));}else{setProducts(prevProducts=>[...prevProducts,...data]);setSelectedBrandOptions(prevOptions=>[...prevOptions,...data]);}}catch(error){console.error('Ошибка при получении данных:',error);}};const handleCategoryOptionClick=async category=>{try{const response=await fetch(\"https://nicedunks.ru/api/sneakers?category=\".concat(category));const data=await response.json();console.log('Полученные данные:',data);const isCategorySelected=selectedCategoryOptions.indexOf(category)!==-1;if(isCategorySelected){setSelectedCategoryOptions(prevOptions=>prevOptions.filter(option=>option!==category));setProducts(prevProducts=>prevProducts.filter(product=>!data.some(newItem=>newItem.id===product.id)));}else{setProducts(prevProducts=>[...prevProducts,...data]);setSelectedCategoryOptions(prevOptions=>[...prevOptions,category]);}}catch(error){console.error('Ошибка при получении данных:',error);}};const handleSizeFilterClick=()=>{setShowSizeOptions(prevShowSizeOptions=>!prevShowSizeOptions);};const handleBrandFilterClick=()=>{setShowBrandOptions(prevShowBrandOptions=>!prevShowBrandOptions);};const handleCategoryFilterClick=()=>{setShowCategoryOptions(prevShowCategoryOptions=>!prevShowCategoryOptions);};const applyFilters=()=>{let filteredProducts=[...originalProducts];// Фильтрация по размерам\nif(selectedSizeOptions.length>0){filteredProducts=filteredProducts.filter(product=>product.sizes.some(size=>selectedSizeOptions.includes(size)));}// Фильтрация по брендам\nif(selectedBrandOptions.length>0){filteredProducts=filteredProducts.filter(product=>selectedBrandOptions.some(option=>option.brand===product.brand));}// Фильтрация по категориям\nif(selectedCategoryOptions.length>0){filteredProducts=filteredProducts.filter(product=>selectedCategoryOptions.some(selectedCategory=>product.categories[selectedCategory]));}// Сортировка\nif(sortBy==='price'){filteredProducts.sort((a,b)=>{const priceA=a.price;const priceB=b.price;return sortOrder==='asc'?priceA-priceB:priceB-priceA;});}if(sortBy==='createdAt'){filteredProducts.sort((a,b)=>{const dateA=new Date(a.createdAt);const dateB=new Date(b.createdAt);return sortOrder==='asc'?dateA-dateB:dateB-dateA;});}setProducts(filteredProducts);};useEffect(()=>{applyFilters();},[selectedSizeOptions,selectedBrandOptions,selectedCategoryOptions,sortOrder,sortBy,originalProducts]);useEffect(()=>{const sizes=[...new Set(originalProducts.flatMap(product=>product.sizes))];sizes.sort((a,b)=>parseFloat(a)-parseFloat(b));setAvailableSizes(sizes);const brands=[...new Set(originalProducts.map(product=>product.brand))];brands.sort((a,b)=>parseFloat(a)-parseFloat(b));setAllBrands(brands);},[originalProducts]);const categoryMapping={accessories:'Аксессуары',clothes:'Одежда',newSneakers:'Новые пары',preorder:'Предзаказ',used:'Б/У'};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.ProductsPage__Wrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.ProductsPage__Filters,children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSizeFilterClick(),style:{color:selectedSizeOptions.length>0?'#AC8BD5':''},children:[\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440\\u044B\",showSizeOptions&&/*#__PURE__*/_jsx(\"div\",{className:classes.Options,children:availableSizes.map(size=>/*#__PURE__*/_jsx(\"button\",{className:selectedSizeOptions.includes(size)?classes.SelectedOption:'',onClick:e=>{e.stopPropagation();handleSizeOptionClick(size);},children:size},size))})]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleBrandFilterClick(),style:{color:selectedBrandOptions.length>0?'#AC8BD5':''},children:[\"\\u0411\\u0440\\u0435\\u043D\\u0434\\u044B\",showBrandOptions&&/*#__PURE__*/_jsx(\"div\",{className:classes.Options,children:apiBrands.map(brand=>{const isSelected=selectedBrandOptions.some(option=>option.brand===brand);const brandClass=isSelected?classes.SelectedOption:'';return/*#__PURE__*/_jsx(\"button\",{className:brandClass,onClick:e=>{e.stopPropagation();handleBrandOptionClick(brand);},children:formatBrand(brand)},brand);})})]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleCategoryFilterClick(),style:{color:selectedCategoryOptions.length>0?'#AC8BD5':''},children:[\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\",showCategoryOptions&&/*#__PURE__*/_jsx(\"div\",{className:classes.Options,children:Object.keys(categoryMapping).map(categoryKey=>/*#__PURE__*/_jsx(\"button\",{className:selectedCategoryOptions.includes(categoryKey)?classes.SelectedOption:'',onClick:e=>{e.stopPropagation();handleCategoryOptionClick(categoryKey);},children:categoryMapping[categoryKey]},categoryKey))})]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSortClick('price'),style:{color:sortBy==='price'?'#AC8BD5':''},children:[\"\\u0426\\u0435\\u043D\\u0430 \",sortBy==='price'&&(sortOrder==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSortClick('createdAt'),style:{color:sortBy==='createdAt'?'#AC8BD5':''},children:[\"\\u041D\\u043E\\u0432\\u0438\\u0437\\u043D\\u0435 \",sortBy==='createdAt'&&(sortOrder==='asc'?'↑':'↓')]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.Products__Wrapper,children:products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:classes.product__card,onClick:()=>redirectToProductPage(product.vendorCode),children:[/*#__PURE__*/_jsx(\"h2\",{children:formatBrand(product.brand)+' '+product.silhouette+' '+product.color}),/*#__PURE__*/_jsxs(\"h2\",{children:[product.price,\"\\u20BD\"]}),/*#__PURE__*/_jsx(\"img\",{src:product.images[0],alt:product.brand})]},index))})]})});};export default ProductsPage;","map":{"version":3,"names":["React","useState","useEffect","classes","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","ProductsPage","originalProducts","setOriginalProducts","products","setProducts","loading","setLoading","page","setPage","loadedProductIds","setLoadedProductIds","Set","sortOrder","setSortOrder","sortBy","setSortBy","showSizeOptions","setShowSizeOptions","showBrandOptions","setShowBrandOptions","showCategoryOptions","setShowCategoryOptions","apiBrands","setApiBrands","availableSizes","setAvailableSizes","selectedSizeOptions","setSelectedSizeOptions","allBrands","setAllBrands","selectedBrandOptions","setSelectedBrandOptions","selectedCategoryOptions","setSelectedCategoryOptions","navigate","location","searchParams","URLSearchParams","search","selectedBrand","get","fetchProducts","response","fetch","data","json","newProducts","filter","product","has","vendorCode","reverse","prevOriginalProducts","prevProducts","prevIds","map","prevPage","error","console","getQueryParam","name","params","sizesParam","brandsParam","categoryParam","sortByParam","sortOrderParam","split","brandOptions","brand","trim","updateUrl","length","append","join","option","concat","toString","handleBrandOptionClick","fetchBrands","handleScroll","scrollThreshold","isCloseToBottom","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","redirectToProductPage","link","toLowerCase","formatBrand","words","handleSortClick","sortType","handleSizeOptionClick","size","newData","log","includes","prevOptions","prevSize","uniqueNewData","newItem","some","existingItem","id","selectedBrands","item","isBrandSelected","optionBrands","handleCategoryOptionClick","category","isCategorySelected","indexOf","handleSizeFilterClick","prevShowSizeOptions","handleBrandFilterClick","prevShowBrandOptions","handleCategoryFilterClick","prevShowCategoryOptions","applyFilters","filteredProducts","sizes","selectedCategory","categories","sort","a","b","priceA","price","priceB","dateA","Date","createdAt","dateB","flatMap","parseFloat","brands","categoryMapping","accessories","clothes","newSneakers","preorder","used","children","className","ProductsPage__Wrapper","ProductsPage__Filters","onClick","style","color","Options","SelectedOption","e","stopPropagation","isSelected","brandClass","Object","keys","categoryKey","Products__Wrapper","index","product__card","silhouette","src","images","alt"],"sources":["D:/project/nicedunks/nicedunks/src/components/ProductsPage/ProductsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport classes from './ProductsPage.module.css';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst ProductsPage = () => {\r\n  const [originalProducts, setOriginalProducts] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [loadedProductIds, setLoadedProductIds] = useState(new Set());\r\n  const [sortOrder, setSortOrder] = useState('desc'); \r\n  const [sortBy, setSortBy] = useState('createdAt');\r\n  const [showSizeOptions, setShowSizeOptions] = useState(false);\r\n  const [showBrandOptions, setShowBrandOptions] = useState(false);\r\n  const [showCategoryOptions, setShowCategoryOptions] = useState(false);\r\n  const [apiBrands, setApiBrands] = useState([]);\r\n  const [availableSizes, setAvailableSizes] = useState([]);\r\n  const [selectedSizeOptions, setSelectedSizeOptions] = useState([]);\r\n  const [allBrands, setAllBrands] = useState([]);\r\n  const [selectedBrandOptions, setSelectedBrandOptions] = useState([]);\r\n  const [selectedCategoryOptions, setSelectedCategoryOptions] = useState([]);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const selectedBrand = searchParams.get('brand');\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`https://nicedunks.ru/api/sneakers?`);\r\n      const data = await response.json();\r\n      const newProducts = data.filter((product) => !loadedProductIds.has(product.vendorCode));\r\n      newProducts.reverse();\r\n      setOriginalProducts((prevOriginalProducts) => [...prevOriginalProducts, ...newProducts]);\r\n      setProducts((prevProducts) => [...prevProducts, ...newProducts]);\r\n      setLoadedProductIds((prevIds) => new Set([...prevIds, ...newProducts.map((product) => product.vendorCode)]));\r\n      setPage((prevPage) => prevPage + 1);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке товаров', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getQueryParam = (name) => {\r\n    const params = new URLSearchParams(location.search);\r\n    return params.get(name);\r\n  };\r\n  useEffect(() => {\r\n    // При первоначальной загрузке компонента, применяем параметры из URL\r\n    const sizesParam = getQueryParam('sizes');\r\n    const brandsParam = getQueryParam('brands');\r\n    const categoryParam = getQueryParam('category');\r\n    const sortByParam = getQueryParam('sortBy');\r\n    const sortOrderParam = getQueryParam('sortOrder');\r\n\r\n    if (sizesParam) {\r\n      setSelectedSizeOptions(sizesParam.split(','));\r\n    }\r\n\r\n    if (brandsParam) {\r\n      const brandOptions = brandsParam.split(',').map((brand) => ({ brand: brand.trim() }));\r\n      setSelectedBrandOptions(brandOptions);\r\n    }\r\n\r\n    if (categoryParam) {\r\n      setSelectedCategoryOptions(categoryParam.split(','));\r\n    }\r\n\r\n    if (sortByParam) {\r\n      setSortBy(sortByParam);\r\n    }\r\n\r\n    if (sortOrderParam) {\r\n      setSortOrder(sortOrderParam);\r\n    }\r\n  }, []);\r\n\r\n\r\n  const updateUrl = () => {\r\n    const searchParams = new URLSearchParams();\r\n\r\n    if (selectedSizeOptions.length > 0) {\r\n      searchParams.append('sizes', selectedSizeOptions.join(','));\r\n    }\r\n\r\n    if (selectedBrandOptions.length > 0) {\r\n      searchParams.append('brands', selectedBrandOptions.map(option => option.brand).join(','));\r\n    }\r\n\r\n    if (selectedCategoryOptions.length > 0) {\r\n      searchParams.append('category', selectedCategoryOptions.join(','));\r\n    }\r\n\r\n    searchParams.append('sortBy', sortBy);\r\n    searchParams.append('sortOrder', sortOrder);\r\n\r\n    navigate(`?${searchParams.toString()}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateUrl();\r\n  }, [selectedSizeOptions, selectedBrandOptions, selectedCategoryOptions, sortOrder, sortBy]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (selectedBrand) {\r\n      handleBrandOptionClick(selectedBrand);\r\n    }\r\n  }, [selectedBrand]);\r\n\r\n  const fetchBrands = async () => {\r\n    try {\r\n      const response = await fetch('https://nicedunks.ru/api/brands');\r\n      const data = await response.json();\r\n      setApiBrands(data);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке брендов:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBrands();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const handleScroll = () => {\r\n    const scrollThreshold = 100;\r\n    const isCloseToBottom =\r\n      window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight - scrollThreshold;\r\n\r\n    if (isCloseToBottom && !loading) {\r\n      fetchProducts();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [loading]);\r\n\r\n  const redirectToProductPage = (vendorCode) => {\r\n    const link = `/product/${vendorCode.toLowerCase()}`;\r\n    navigate(link);\r\n  };\r\n\r\n  const formatBrand = (brand) => {\r\n    const words = brand.split(/\\s*,\\s*/);\r\n    if (words.length > 1) {\r\n      return words.join(' X ');\r\n    }\r\n    return brand;\r\n  };\r\n\r\n  const handleSortClick = (sortType) => {\r\n    if (sortType === sortBy) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(sortType);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const handleSizeOptionClick = async (size) => {\r\n    try {\r\n      const response = await fetch(`https://nicedunks.ru/api/sneakers?sizes=${size}`);\r\n      const newData = await response.json();\r\n      console.log('Полученные данные:', newData);\r\n  \r\n      if (selectedSizeOptions.includes(size)) {\r\n        setSelectedSizeOptions((prevOptions) => prevOptions.filter((prevSize) => prevSize !== size));\r\n      } else {\r\n        const uniqueNewData = newData.filter((newItem) => {\r\n          return !originalProducts.some((existingItem) => {\r\n            return newItem.id === existingItem.id;\r\n          });\r\n        });\r\n  \r\n        setOriginalProducts((prevOriginalProducts) => [\r\n          ...prevOriginalProducts,\r\n          ...uniqueNewData,\r\n        ]);\r\n  \r\n        setSelectedSizeOptions((prevOptions) => [...prevOptions, size]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка при получении данных:', error);\r\n    }\r\n  };\r\n  \r\n  const handleBrandOptionClick = async (brand) => {\r\n    try {\r\n      const response = await fetch(`https://nicedunks.ru/api/sneakers?brands=${brand}`);\r\n      const data = await response.json();\r\n      console.log('Полученные данные:', data);\r\n  \r\n      const selectedBrands = brand.split(',').map(item => item.trim());\r\n  \r\n      const isBrandSelected = selectedBrandOptions.some((option) => {\r\n        const optionBrands = option.brand.split(',').map(item => item.trim());\r\n        return optionBrands.some(brand => selectedBrands.includes(brand));\r\n      });\r\n  \r\n      if (isBrandSelected) {\r\n        setSelectedBrandOptions((prevOptions) => prevOptions.filter((option) => {\r\n          const optionBrands = option.brand.split(',').map(item => item.trim());\r\n          return !optionBrands.some(brand => selectedBrands.includes(brand));\r\n        }));\r\n        setProducts((prevProducts) => prevProducts.filter((product) => !data.some((newItem) => newItem.id === product.id)));\r\n      } else {\r\n        setProducts((prevProducts) => [...prevProducts, ...data]);\r\n        setSelectedBrandOptions((prevOptions) => [...prevOptions, ...data]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка при получении данных:', error);\r\n    }\r\n  };\r\n  \r\n\r\n  const handleCategoryOptionClick = async (category) => {\r\n    try {\r\n      const response = await fetch(`https://nicedunks.ru/api/sneakers?category=${category}`);\r\n      const data = await response.json();\r\n      console.log('Полученные данные:', data);\r\n\r\n      const isCategorySelected = selectedCategoryOptions.indexOf(category) !== -1;\r\n      if (isCategorySelected) {\r\n        setSelectedCategoryOptions((prevOptions) => prevOptions.filter((option) => option !== category));\r\n        setProducts((prevProducts) => prevProducts.filter((product) => !data.some((newItem) => newItem.id === product.id)));\r\n      } else {\r\n        setProducts((prevProducts) => [...prevProducts, ...data]);\r\n        setSelectedCategoryOptions((prevOptions) => [...prevOptions, category]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка при получении данных:', error);\r\n    }\r\n  };\r\n\r\n  const handleSizeFilterClick = () => {\r\n    setShowSizeOptions((prevShowSizeOptions) => !prevShowSizeOptions);\r\n  };\r\n\r\n  const handleBrandFilterClick = () => {\r\n    setShowBrandOptions((prevShowBrandOptions) => !prevShowBrandOptions);\r\n  };\r\n\r\n  const handleCategoryFilterClick = () => {\r\n    setShowCategoryOptions((prevShowCategoryOptions) => !prevShowCategoryOptions);\r\n  };\r\n\r\n  const applyFilters = () => {\r\n    let filteredProducts = [...originalProducts];\r\n  \r\n    // Фильтрация по размерам\r\n    if (selectedSizeOptions.length > 0) {\r\n      filteredProducts = filteredProducts.filter((product) =>\r\n        product.sizes.some((size) => selectedSizeOptions.includes(size))\r\n      );\r\n    }\r\n  \r\n    // Фильтрация по брендам\r\n    if (selectedBrandOptions.length > 0) {\r\n      filteredProducts = filteredProducts.filter((product) =>\r\n        selectedBrandOptions.some((option) => option.brand === product.brand)\r\n      );\r\n    }\r\n\r\n    // Фильтрация по категориям\r\n    if (selectedCategoryOptions.length > 0) {\r\n      filteredProducts = filteredProducts.filter((product) =>\r\n      selectedCategoryOptions.some((selectedCategory) => product.categories[selectedCategory]\r\n    )\r\n);\r\n\r\n    }\r\n  \r\n    // Сортировка\r\n    if (sortBy === 'price') {\r\n      filteredProducts.sort((a, b) => {\r\n        const priceA = a.price;\r\n        const priceB = b.price;\r\n        return sortOrder === 'asc' ? priceA - priceB : priceB - priceA;\r\n      });\r\n    }\r\n  \r\n    if (sortBy === 'createdAt') {\r\n      filteredProducts.sort((a, b) => {\r\n        const dateA = new Date(a.createdAt);\r\n        const dateB = new Date(b.createdAt);\r\n        return sortOrder === 'asc' ? dateA - dateB : dateB - dateA;\r\n      });\r\n    }\r\n  \r\n    setProducts(filteredProducts);\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [selectedSizeOptions, selectedBrandOptions, selectedCategoryOptions, sortOrder, sortBy, originalProducts]);\r\n\r\n  useEffect(() => {\r\n    const sizes = [...new Set(originalProducts.flatMap((product) => product.sizes))];\r\n    sizes.sort((a, b) => parseFloat(a) - parseFloat(b));\r\n    setAvailableSizes(sizes);\r\n\r\n    const brands = [...new Set(originalProducts.map((product) => product.brand))];\r\n    brands.sort((a, b) => parseFloat(a) - parseFloat(b));\r\n    setAllBrands(brands);\r\n  }, [originalProducts]);\r\n\r\n  const categoryMapping = {\r\n  accessories: 'Аксессуары',\r\n  clothes: 'Одежда',\r\n  newSneakers: 'Новые пары',\r\n  preorder: 'Предзаказ',\r\n  used: 'Б/У',\r\n};\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.ProductsPage__Wrapper}>\r\n        <div className={classes.ProductsPage__Filters}>\r\n          <p>Сортировать по:</p>\r\n          <ul>\r\n            <li\r\n              onClick={() => handleSizeFilterClick()}\r\n              style={{ color: selectedSizeOptions.length > 0 ? '#AC8BD5' : '' }}\r\n            >\r\n              Размеры\r\n              {showSizeOptions && (\r\n                <div className={classes.Options}>\r\n                  {availableSizes.map((size) => (\r\n                    <button\r\n                      key={size}\r\n                      className={selectedSizeOptions.includes(size) ? classes.SelectedOption : ''}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleSizeOptionClick(size);\r\n                      }}\r\n                    >\r\n                      {size}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </li>\r\n            <li\r\n              onClick={() => handleBrandFilterClick()}\r\n              style={{ color: selectedBrandOptions.length > 0 ? '#AC8BD5' : '' }}\r\n            >\r\n              Бренды\r\n              {showBrandOptions && (\r\n                <div className={classes.Options}>\r\n                  {apiBrands.map((brand) => {\r\n                    const isSelected = selectedBrandOptions.some((option) => option.brand === brand);\r\n                    const brandClass = isSelected ? classes.SelectedOption : '';\r\n                    return (\r\n                      <button\r\n                        key={brand}\r\n                        className={brandClass}\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleBrandOptionClick(brand);\r\n                        }}\r\n                      >\r\n                        {formatBrand(brand)}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </li>\r\n            <li\r\n              onClick={() => handleCategoryFilterClick()}\r\n              style={{ color: selectedCategoryOptions.length > 0 ? '#AC8BD5' : '' }}\r\n            >\r\n              Категории\r\n              {showCategoryOptions && (\r\n                <div className={classes.Options}>\r\n                  {Object.keys(categoryMapping).map((categoryKey) => (\r\n                  <button\r\n                    key={categoryKey}\r\n                    className={selectedCategoryOptions.includes(categoryKey) ? classes.SelectedOption : ''}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleCategoryOptionClick(categoryKey);\r\n                    }}\r\n                  >\r\n                    {categoryMapping[categoryKey]}\r\n                  </button>\r\n                ))}\r\n                </div>\r\n              )}\r\n            </li>\r\n            <li\r\n              onClick={() => handleSortClick('price')}\r\n              style={{ color: sortBy === 'price' ? '#AC8BD5' : '' }}\r\n            >\r\n              Цена {sortBy === 'price' && (sortOrder === 'asc' ? '↑' : '↓')}\r\n            </li>\r\n            <li\r\n              onClick={() => handleSortClick('createdAt')}\r\n              style={{ color: sortBy === 'createdAt' ? '#AC8BD5' : '' }}\r\n            >\r\n              Новизне {sortBy === 'createdAt' && (sortOrder === 'asc' ? '↑' : '↓')}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className={classes.Products__Wrapper}>\r\n          {products.map((product, index) => (\r\n            <div key={index} className={classes.product__card} onClick={() => redirectToProductPage(product.vendorCode)}>\r\n              <h2>\r\n                {formatBrand(product.brand) + ' ' + product.silhouette + ' ' + product.color}\r\n              </h2>\r\n              <h2>{product.price}₽</h2>\r\n              <img src={product.images[0]} alt={product.brand} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}